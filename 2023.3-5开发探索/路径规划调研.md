---
title: 路径规划调研
date: 2023-03-10 23:38:42
tags: 调研
---

## 路径规划调研

路径(path)表示在关节空间或操作空间中，机械手在执行指定运动时必须跟随的点的轨迹。因此，路径是运动的纯几何描述。轨迹(trajectory)则是一条指定了时间律的路径，例如确定了每一点的速度或加速度。

### Moveit运动规划

- 运动规划：moveit可以调用几大运动规划库的规划算法（如OMPL，SBPL，CHMOP），自动生成机器人运动轨迹。

  - 路径规划算法大全：http://ompl.kavrakilab.org/planners.html  

  - CHOMP (Covariant Hamiltonian Optimization for Motion Planning)（轨迹优化算法）

    ​		smooth and collision-free trajectoriesfor the UR5.

- 运动规划器：moveit通过插件与运动规划器（motion planner）进行交互，默认使用的运动规划器是 OMPL（Open Motion Planning Library） 库。（常用插件KDL、TRAC-lK 、IKfast）

ROS可以用OpenRave的ikFast等工具  ORROSPLANNING 

### 开源项目 

- **OROCOS** ：这个开源项目主要侧重于机器人底层控制器的设计（包括串联机械臂运动学**数值解**的KDL）
  - KDL数值解，速度慢、可能找不到解。

- **OpenRave**：这是在ROS之前最多人用来做运动规划的平台，ROS已经将其中的ikfast（计算串联机械臂运动学**解析解**）等功能吸收。
  - IKFAST是一种基于解析算法的运动学插件，可以保证每次求解的一致性。IKFAST可以求解任意复杂运动链的运动学方程，最终的结果是非常稳定的解决方案。**（推荐）**

- **OMPL**：现在最著名的运动规划开源项目，已经成了MoveIt的一部分。
  - Moveit包包含OMPL接口，配合FCL碰撞检测实现避障运动规划

moveit运动学插件安装教程：(https://blog.csdn.net/weixin_42503785/article/details/111942081)







## 逆运动学求解方法

### 逆运动学求解逻辑

机械臂没有办法像二维机器人一样，将机械臂视作一个点，然后扩展障碍物（膨胀处理，闵可夫斯基法）；机械臂的构形空间不行；用广义坐标（通常为各关节角度）可以将机械臂用一个点描述，如六自由度机器人可用六维向量空间的一个点(θ1,θ2,θ3,θ4, θ5, θ6)描述。但相应的障碍物的描述就比较麻烦，由于机械臂逆解存在多解和奇异等问题，所以从工作空间到构形空间的映射是非线性的，目前没有很好的方法将工作空间的障碍物直接映射到构形空间。对此，一般做法是对**构形空间离散化**，对构形空间的每个网格判断是否存在障碍物。理论上讲，空间离散法可以适用于任何维度的空间，但问题是它会引入很大的计算量。

**逆运动学——想控制的量在操作空间，而能控制的量却在关节空间**

（从工作空间到关节空间的求解）

- 构型空间（关节空间/C-space）
  - Cartesian-space 来做轨迹规划是一种直观的对位姿轨迹的规划。但可能出现机器人的运动速度上的不平滑。

- 工作空间（操作空间/笛卡尔空间）
  - Joint-space 可以保证运动速度的平滑，但是运动位姿的轨迹可能与设计前预想的轨迹有区别，不会出现尖锐的拐角。

**封闭解与数值解**

- 数值解法是通过迭代求解的，因此速度较慢（包括迭代法和优化法）

- 封闭解法是以解析的方式求取逆解，分为几何法与代数法，得到的解称为解析解。



### 常用算法

- **随机路图法PRM**

随机路图（Probabilistic Road Maps，PRM）就是在规划空间内随机选取N个节点，之后连接各节点，并去除与障碍物接触的连线，由此得到一个随机路图。

显然，当采样点太少，或者分布不合理时，PRM算法是不完备的，但是随着采用点的增加，也可以达到完备。所以PRM是**概率完备且不最优**的。

- **快速扩展随机树法RRT**

除了基于图搜索的方法，还有另外一大类基于树状结构的搜索算法，其中最著名的就是快速扩展随机树法（Randomly Exploring Randomized Trees，RRT）了。

RRT算法是从起始点开始向外拓展一个树状结构，而树状结构的拓展方向是通过在规划空间内随机采点确定的。与PRM类似，该方法是**概率完备且不最优**的。

这两种算法的相同点是，他们均不考虑障碍物在C-Space中的分布情况，而是采用碰撞检测函数对几个**随机采样点**进行碰撞检测。PRM和RRT算法在高维空间中都可以使用，且满足概率完备性（非最优），规划速度相当快。虽然基于采样的规划算法速度很快，但他们也有致命的缺点，那就是由随机采样引入的随机性。利用RRT和PRM算法进行运动规划，用户无法对规划结果进行预判，**每次规划的结果都不一样**，这就使得自动规划的机器人无法进入工业领域（极端追求稳定性）。



**相比之下IK_FAST是基于数值解法可以保证每次求解的一致性。**

