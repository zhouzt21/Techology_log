---
title: 网络通信基本概念
date: 2023-04-01
tags: 知识
---



# 网络通信协议

## 1.服务器与客户端

### 1.1基本概念

- 硬件和操作系统与客户端是有所不同
- 网络相关的部分 ， 如网卡、 协议栈 、 Socket 库等功能和客户端却并无二致

连接过程： 客户端发起连接操作， 而服务器则是等待连接操作 ， 因此在 Socket 库的用法上还是有一些区别的， 即应用程序调用的 Socket 库的程序组件不同 。

服务器的程序可以同时和多台客户端计算机进行通信

### 1.2 结构

服务器程序和客户端程序在结构上是不同的 。

- 服务器结构

  每有一个客户端连接进来，就启动一个新的服务器程序，确保服务器程序和客户端是一对一的状态

  - 创建等待链接模块： 当服务器程序启动并读取配置文件完成初始化操作后 ， 就会运行等待连接模块。 这个模块会创建**套接字** ， 然后进入等待连接的暂停状态。
  - 等待连接模块运行并接受连接 ：当客户端连发起连接时 ， 这个模块会恢复运行并接受连接 ， 然后启动客户端通信模块， 并移交完成连接的套接字 。客户端通信模块就会使用已连接的套接字与客户端进行通信。
  - 通信结束后：每次有新的客户端发起连接 ， 都会启动一个新的客户端通信模块（保证了一对一）
  - 

![img](https://img-blog.csdnimg.cn/20200115112802439.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NrNzg0MTAxNzc3,size_16,color_FFFFFF,t_70)

当然， 这种方法在每次客户端发起连接时都需要启动新的程序，这个过程比较耗时，响应时间也会相应增加 。 因此 ，还有一种方法是事先启动几个客户端通信模块，当客户端发起连接时，从空闲的模块中挑选一个出来将套接字移交给它来处理。这个模块就退出了。

- 服务器套接字和端口号
  - 数据收发区分：为了能够支持各种形态的应用，最好是在**数据收发层面不需要区分客户端和服务器**，而是能够以左右对称的方式自由发送数据。 TCP 也正是在这样的背景下设计出来的。（但连接层面还是无法做到左右对称）
  - 连接层面必须区分发起连接和等待连接这两个不同的角色 。 从数据收发的角度来看 即为客户端与服务器的区别 ， 发起连接的一方是客户端，等待连接的一方是服务器。 这个区别体现在如何调用 Socket 库上 。

参考：https://blog.csdn.net/ck784101777/article/details/103985933

通信协议

WebSocket

UDP

TCP

IP

Socket库